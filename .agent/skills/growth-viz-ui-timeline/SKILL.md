name: "growth-viz-ui-timeline"

description: "Rechartsライブラリを使用して、ユーザーの成長推移（獲得ポイント等）と同期平均を比較するインタラクティブなタイムライングラフを描画する。"

version: "1.0.0"

author: "OWLight Development Team"

tags: \["feature", "growth-viz", "ui-component"]

triggers:

&nbsp; - "成長グラフ"

&nbsp; - "推移チャート"

&nbsp; - "Growth Timeline"

---



\## 概要



ユーザーの成長を視覚的にフィードバックするためのグラフコンポーネントを実装します。

`growth-viz-api-calc` から取得した時系列データに基づき、自身のポイント獲得推移を折れ線グラフ（またはエリアチャート）で描画します。さらに、同期や全社の平均ラインを重ねて表示することで、自身の立ち位置を直感的に把握できるようにし、モチベーション向上を促します。期間切り替え機能（1ヶ月〜1年）も提供します。







\## このスキルが前提とするもの



\- `growth-viz-api-calc` スキルにより、データ取得API (`GET /api/v1/growth/timeline`) が実装済みであること

\- プロジェクトに `recharts` ライブラリがインストールされていること

\- UI ガイドライン（Teal #218F8D）および共通コンポーネント（Card, ButtonGroup）が利用可能であること



\## 実装内容



\### UI 実装



\*\*コンポーネント：GrowthTimelineChart.tsx\*\*



\- 機能：成長推移のグラフ表示

\- 構成要素：

&nbsp; - \*\*期間フィルター\*\*: 「1ヶ月」「3ヶ月」「6ヶ月」「1年」の切り替えボタン（Segmented Control）。

&nbsp; - \*\*チャートエリア\*\*: `ResponsiveContainer` 内に `LineChart` または `AreaChart` を配置。

&nbsp;   - \*\*X軸\*\*: 日付（`date`）。期間に応じてフォーマットを調整（例: "MM/DD"）。

&nbsp;   - \*\*Y軸\*\*: 獲得ポイント（`total\_wisdom\_points`）。

&nbsp;   - \*\*自身のライン\*\*: プライマリーカラー（Teal）の実線。

&nbsp;   - \*\*平均ライン\*\*: グレーの点線（`strokeDasharray="5 5"`）。

&nbsp; - \*\*ツールチップ\*\*: ホバー時に「自分: 1200pt / 同期平均: 1150pt」のような詳細を表示するカスタムコンポーネント。

\- 動作：

&nbsp; - 初期ロード時にAPIからデフォルト期間（例: 3ヶ月）のデータを取得。

&nbsp; - フィルター変更時に再フェッチを行い、グラフをアニメーション付きで更新。



\*\*画面レイアウト\*\*



\- 配置：ダッシュボード（Home）またはプロフィール画面の「成長記録」セクション

\- サイズ：親コンテナの幅に合わせてリサイズ（高さは固定、例: 300px）

\- レスポンシブ：モバイルではX軸のラベルを間引くなどして視認性を確保



\## 参考資料



\- `/docs/03\_SCREEN\_DESIGN.md` （ダッシュボードのグラフデザイン）

\- `/docs/05\_UI\_UX\_GUIDELINES.md` （データ可視化のカラーパレット）

\- `/docs/04\_API\_SPECIFICATION.md` （APIレスポンス型定義）



\## チェックリスト



実装完了時に、以下をすべて確認：



\- \[ ] `GrowthTimelineChart.tsx` が実装され、APIデータに基づいてグラフが描画されること

\- \[ ] 自身のデータ（実線）と同期平均（点線）が区別して表示されること

\- \[ ] 期間切り替えボタンが機能し、データの再取得と再描画が行われること

\- \[ ] カスタムツールチップが実装され、ホバー時に正確な数値が表示されること

\- \[ ] データ読み込み中にローディング（スケルトンまたはスピナー）が表示されること

\- \[ ] データが空の場合やAPIエラー時のフォールバック表示が実装されていること

\- \[ ] ブラウザ幅を変更した際にグラフがリサイズされること（ResponsiveContainer確認）



\## 補足・注意事項



\- `recharts` の `ResponsiveContainer` を機能させるには、親要素に明示的な高さ（`h-64` や `height: 300px` 等）が設定されている必要があります。

\- 色覚多様性に配慮し、色だけでなく線のスタイル（実線・点線）でも情報を区別できるように実装してください。

