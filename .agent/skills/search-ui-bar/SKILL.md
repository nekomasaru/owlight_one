name: "search-ui-bar"

description: "オートコンプリート（サジェスト）機能を備えたグローバル検索バーコンポーネントを実装する。"

version: "1.0.0"

author: "OWLight Development Team"

tags: \["feature", "search-experience", "ui-component"]

triggers:

&nbsp; - "検索バー"

&nbsp; - "Search Bar"

&nbsp; - "グローバル検索"

---



\## 概要



アプリケーションのヘッダー等に常駐し、ユーザーがいつでもナレッジやドキュメントを検索できるようにする入力コンポーネントを実装します。

ユーザーの入力に合わせてリアルタイムで検索候補（サジェスト）をドロップダウン表示する機能を備え、Enterキーまたは検索ボタン押下で統合検索結果ページ（`/search`）へ遷移させるナビゲーションの役割を担います。







\## このスキルが前提とするもの



\- UI ガイドライン（Teal #218F8D）および共通コンポーネント（Input, Button）が利用可能であること

\- アイコンライブラリ（Lucide React の `Search` 等）が導入されていること

\- （推奨）`search-api-unified` が実装済み、またはモック用のサジェストAPIが利用可能であること



\## 実装内容



\### UI 実装



\*\*コンポーネント：GlobalSearchBar.tsx\*\*



\- \*\*機能\*\*: 検索クエリの入力と送信

\- \*\*状態管理\*\*:

&nbsp; - `query`: 入力中のテキスト

&nbsp; - `suggestions`: 取得したサジェスト候補リスト

&nbsp; - `isFocused`: フォーカス状態（ドロップダウンの表示制御用）

\- \*\*UI要素\*\*:

&nbsp; - \*\*Input\*\*: 左側に検索アイコン、右側に「/」または「Cmd+K」のショートカットヒントを表示。

&nbsp; - \*\*Dropdown\*\*: 入力中に候補がある場合、Inputの下に絶対配置でリストを表示。

\- \*\*インタラクション\*\*:

&nbsp; - `onChange`: 入力値を更新し、デバウンス（Debounce 300ms程度）をかけてサジェストAPIをコール。

&nbsp; - `onKeyDown`: 上下キーで候補選択、Enterキーで検索実行。

&nbsp; - `onSubmit`: クエリパラメータ（`?q=...`）を付与して `/search` ページへ遷移。



\*\*画面レイアウト\*\*



\- 配置: グローバルヘッダーの中央、またはサイドバー上部。

\- スタイル:

&nbsp; - 通常時: 背景色を薄くし、目立ちすぎないようにする。

&nbsp; - フォーカス時: 幅を広げる（モバイル時など）、またはボーダー色をTealに変更して強調する。



\### クライアントサイドロジック



\- \*\*ショートカットキー\*\*: `Cmd+K` (Mac) / `Ctrl+K` (Windows) で検索バーにフォーカスを当てるイベントリスナーを実装。

\- \*\*クリック外判定\*\*: 検索バー以外をクリックした際にサジェストを閉じる処理（`useOnClickOutside` 等）。



\## 参考資料



\- `/docs/03\_SCREEN\_DESIGN.md` （ヘッダーおよび検索バーのデザイン）

\- `/docs/05\_UI\_UX\_GUIDELINES.md` （入力フォームとドロップダウンのスタイル）

\- `/docs/04\_API\_SPECIFICATION.md` （検索・サジェストAPIの仕様）



\## チェックリスト



実装完了時に、以下をすべて確認：



\- \[ ] `GlobalSearchBar.tsx` が表示され、テキスト入力ができること

\- \[ ] キーボードショートカット（Cmd+K / Ctrl+K）でフォーカスが当たること

\- \[ ] 入力文字に応じてサジェストリスト（モック可）が表示されること

\- \[ ] 上下キーでサジェストを選択し、Enterで決定できること

\- \[ ] Enterキーまたはアイコンクリックで `/search?q=...` へ遷移すること

\- \[ ] 検索バー外をクリックするとサジェストが閉じること

\- \[ ] モバイル幅（375px）でもレイアウトが崩れず、操作可能であること



\## 補足・注意事項



\- サジェストAPIが未実装の場合は、静的なダミーデータ（例: \["休暇申請", "経費精算", "マニュアル"]）を使用してUIの動作確認を行ってください。

\- 日本語入力（IME）確定時のEnterキー押下で意図せず送信されないよう、`isComposing` フラグ等での制御を推奨します。

