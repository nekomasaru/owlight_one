---

name: "auth-ui-morning-ritual"

description: "「今日の価値観」を選択しDBに保存するアニメーション付きの朝の儀式（Morning Ritual）モーダルUIを実装する。"

version: "1.0.0"

author: "OWLight Development Team"

tags: \["feature", "auth", "ui-component"]

triggers:

&nbsp; - "朝の儀式"

&nbsp; - "価値観選択"

&nbsp; - "MorningRitual"

---



\## 概要



ユーザーが1日の業務を開始する際に表示される「朝の儀式」モーダルを実装します。

このUIは、単なる業務開始ボタンではなく、その日のマインドセット（価値観）を「誠実さ」「挑戦」「優しさ」の3つから選択させることで、職員の主体性を引き出す重要なUXコンポーネントです。



\## このスキルが前提とするもの



\- `auth-api-session` スキルにより、ユーザーセッションが利用可能であること

\- `UserContext` が実装済みであること

\- 価値観保存用のAPIまたはDB構造（`profiles` テーブルへのjsonbカラム追加など）が準備されていること（本スキル内で簡易的にAPIを定義するか、既存APIを利用）

\- UI ガイドライン（Teal #218F8D）およびアニメーションライブラリ（Framer Motion等）が利用可能であること



\## 実装内容



\### UI 実装



\*\*コンポーネント：MorningRitualModal.tsx\*\*



\- 機能：全画面オーバーレイで「今日の価値観」を選択させる

\- 表示トリガー：ログイン直後、またはURLパラメータ `?ritual=reset`

\- 構成要素：

&nbsp; 1. \*\*挨拶メッセージ\*\*: 「おはようございます、\[ユーザー名]さん。」（時間帯によって変動）

&nbsp; 2. \*\*フクロウアバター\*\*: ユーザーを見守るキャラクター表示

&nbsp; 3. \*\*価値観カード（3択）\*\*:

&nbsp;    - \*\*Integrity (誠実さ)\*\*: ⚖️ アイコン + 説明文

&nbsp;    - \*\*Challenge (挑戦)\*\*: 🔥 アイコン + 説明文

&nbsp;    - \*\*Kindness (優しさ)\*\*: 🌱 アイコン + 説明文

&nbsp; 4. \*\*決定ボタン\*\*: 「この価値観で一日を始める」（カード選択後に活性化）



\*\*アニメーション要件\*\*



\- フェードイン：ゆっくりと画面が明るくなる演出

\- カード選択時：選んだカードが少し拡大し、他が薄くなる（マイクロインタラクション）

\- 完了時：紙吹雪や光のエフェクトと共にモーダルが閉じる



\### API 連携（簡易）



\*\*POST /api/v1/engagement/daily-intent\*\*



\- 説明：選択された価値観を保存（`engagement` モジュールのAPIを先行利用、または `profiles` 更新APIを利用）

\- リクエスト：`{ intent: "integrity" | "challenge" | "kindness" }`

\- レスポンス：`{ success: true }`



\## 参考資料



\- `/docs/03\_SCREEN\_DESIGN.md` （朝の儀式のUIイメージとアニメーション仕様）

\- `/docs/05\_UI\_UX\_GUIDELINES.md` （カラーパレット、フォント指定）

\- `/docs/07\_BEHAVIORAL\_DESIGN.md` （ナラティブアーク設計、プライミング効果の解説）



\## チェックリスト



実装完了時に、以下をすべて確認：



\- \[ ] `MorningRitualModal.tsx` が全画面オーバーレイとして実装されていること

\- \[ ] 3つの価値観カードが表示され、クリックで選択状態になること

\- \[ ] 決定ボタン押下時に API（`daily-intent` 等）へデータを送信していること

\- \[ ] Framer Motion 等を使用し、滑らかなフェードイン・アウトが動作すること

\- \[ ] 処理完了後、自動的にモーダルが閉じ、ダッシュボードが表示されること

\- \[ ] レスポンシブ対応（スマホでもカードが縦積み等で崩れないこと）

\- \[ ] ブランドカラー（Teal #218F8D）がアクセントとして使用されていること



\## 補足・注意事項



\- この機能はOWLightの「情緒的価値」の中核です。単なるフォームではなく、ユーザーが心地よく感じるような余白とタイミング調整を重視してください。

\- 初回ログイン時だけでなく、デバッグ用に `?ritual=reset` クエリパラメータで強制表示できるロジックを入れておくと開発がスムーズです。

