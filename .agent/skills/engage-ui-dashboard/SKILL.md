name: "engage-ui-dashboard"

description: "フクロウのアバター進化と各種ステータス（ポイント、レベル、守った時間）を表示する個人ダッシュボードUIを実装する。"

version: "1.0.0"

author: "OWLight Development Team"

tags: \["feature", "engagement", "ui-component"]

triggers:

&nbsp; - "ダッシュボード"

&nbsp; - "アバター表示"

&nbsp; - "ステータスパネル"

---



\## 概要



職員がログイン直後に目にする個人ダッシュボード（Personal Dashboard）を実装します。

自身の成長度合いを示す「フクロウのアバター」、獲得した「Wisdom Points」、組織に貢献した「守った時間（Time Saved）」を視覚的に表示し、日々の業務へのモチベーションを高めるためのメイン画面です。



\## このスキルが前提とするもの



\- `engage-api-metrics` スキルにより、エンゲージメント指標取得APIが実装済みであること

\- `UserContext` が利用可能であること

\- UI ガイドライン（Teal #218F8D）およびアバター画像アセット（各レベル用SVG等）が準備されていること

\- 数値カウントアップアニメーションライブラリ（react-countup 等）が導入されていること



\## 実装内容



\### UI 実装



\*\*コンポーネント：PersonalDashboard.tsx\*\*



\- 機能：ダッシュボード全体のレイアウト

\- 構成：

&nbsp; 1. \*\*ヘッダー\*\*: ユーザー名と「今日のテーマ（Morning Ritualで選択したもの）」を表示

&nbsp; 2. \*\*アバターエリア\*\*: 現在のレベルに応じたフクロウのイラストと、次のレベルまでのプログレスバー

&nbsp; 3. \*\*メトリクスパネル\*\*:

&nbsp;    - \*\*Wisdom Points\*\*: 現在のポイント数（大きく表示）

&nbsp;    - \*\*Time Saved\*\*: 「守った時間」の累計（分/時間表記）

&nbsp;    - \*\*Level\*\*: 現在のレベル（称号付き：例「森の賢者」）

&nbsp; 4. \*\*最近のアクティビティ\*\*: `point\_history` から直近の獲得履歴をリスト表示



\*\*コンポーネント：OwlAvatar.tsx\*\*



\- 機能：レベルに応じたアバター画像の切り替え

\- props: `level` (number), `stage` (string)

\- アニメーション: ポイント獲得時に少し跳ねる、または光る演出



\*\*コンポーネント：MetricsCard.tsx\*\*



\- 機能：各指標を表示するカードコンポーネント

\- UI: アイコン + ラベル + 数値（カウントアップ演出付き）



\*\*画面レイアウト\*\*



\- 配置：トップページ（Home）の上部または中央メインエリア

\- レスポンシブ：モバイルでは縦積み、PCでは横並びのグリッドレイアウト



\### 状態管理



\- \*\*SWR / React Query\*\*: `GET /api/v1/engagement/metrics` のデータ取得とキャッシュ

\- \*\*Realtime\*\*: ポイント加算イベントを受け取り、即座に数値を更新する（オプション）



\## 参考資料



\- `/docs/03\_SCREEN\_DESIGN.md` （3.2 Home Dashboard のUI仕様）

\- `/docs/07\_BEHAVIORAL\_DESIGN.md` （Phase 2: Personal Dashboard のUX設計）

\- `/docs/11\_OWLIGHT\_CORE\_DEV\_KIT.md` （Engagement System - Motivation Logic）



\## チェックリスト



実装完了時に、以下をすべて確認：



\- \[ ] `PersonalDashboard.tsx` が実装され、APIから取得したデータが表示されること

\- \[ ] ポイントや「守った時間」がカウントアップアニメーション付きで表示されること

\- \[ ] レベルに応じた正しいフクロウのアバターが表示されること

\- \[ ] プログレスバーが「次のレベルまでの残りポイント」を正しく反映していること

\- \[ ] レスポンシブ対応（スマホでもレイアウトが崩れないこと）

\- \[ ] データ取得中（Loading）のスケルトン表示が機能すること

\- \[ ] エラー時（API失敗）にリトライボタン等が表示されること



\## 補足・注意事項



\- アバター画像アセットがない場合は、仮のプレースホルダー画像（Lucideアイコン等）を使用し、後で差し替え可能な構造にしてください。

\- 「守った時間」は "450分" ではなく "7時間30分" のように、人間が直感的に理解しやすい単位に変換して表示するロジックを UI 側に入れてください。

