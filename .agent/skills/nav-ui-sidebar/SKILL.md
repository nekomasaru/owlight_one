name: "nav-ui-sidebar"

description: "アプリケーションの主要機能へアクセスするための左側固定サイドバーと、現在地のハイライト表示機能を実装する。"

version: "1.0.0"

author: "OWLight Development Team"

tags: \["feature", "navigation", "ui-component"]

triggers:

&nbsp; - "サイドバー"

&nbsp; - "Sidebar"

&nbsp; - "ナビゲーションメニュー"

---



\## 概要



ダッシュボード、ナレッジベース、ディレクトリ、マイページなどの主要画面へ遷移するためのメインナビゲーションを実装します。

デスクトップでは左側に常時表示され、モバイルではハンバーガーメニューから展開されるドロワー形式を採用します。現在表示中のページに対応するメニュー項目をプライマリーカラー（Teal #218F8D）で強調表示し、ユーザーに現在地を明示します。







\## このスキルが前提とするもの



\- UI ガイドライン（Teal #218F8D）および共通コンポーネント（Button, Sheet/Drawer）が利用可能であること

\- アイコンライブラリ（Lucide React）が導入されていること

\- Next.js のルーティング機能（`usePathname`）が利用可能であること

\- 認証情報（`current\_user.role`）が取得可能であること（管理者メニュー表示用）



\## 実装内容



\### UI 実装



\*\*コンポーネント：MainSidebar.tsx\*\*



\- \*\*機能\*\*: ナビゲーションリンクのリスト表示

\- \*\*構成\*\*:

&nbsp; - \*\*Logo\*\*: 最上部にアプリケーションロゴを配置（モバイルではヘッダーにあるため非表示も可）。

&nbsp; - \*\*NavItems\*\*: 以下のリンクを配置。

&nbsp;   - ホーム (`/home`) - Icon: Home

&nbsp;   - ナレッジ (`/knowledge`) - Icon: BookOpen

&nbsp;   - メンバー (`/directory`) - Icon: Users

&nbsp;   - 成長記録 (`/growth`) - Icon: TrendingUp

&nbsp;   - 設定 (`/settings`) - Icon: Settings

&nbsp;   - 管理画面 (`/admin`) - Icon: Shield (※管理者ロールのみ表示)

\- \*\*状態管理\*\*:

&nbsp; - `pathname`: `usePathname()` フックを使用して取得。

&nbsp; - `active`: 現在のパスがリンク先と一致（または包含）する場合に `true`。



\*\*コンポーネント：SidebarItem.tsx\*\*



\- \*\*機能\*\*: 個別のナビゲーション項目

\- \*\*Props\*\*: `href`, `icon`, `label`, `isActive`

\- \*\*スタイル\*\*:

&nbsp; - 通常時: テキスト色はグレー、背景透明。

&nbsp; - アクティブ時: テキスト色は Teal (#218F8D)、背景は Teal の薄い色（opacity 10%）または左端にボーダー表示。

&nbsp; - ホバー時: 背景色をわずかに濃くする。



\*\*画面レイアウト\*\*



\- \*\*デスクトップ\*\*: 幅 250px 固定、`h-screen`、`sticky left-0`。メインコンテンツはこれの右側に配置。

\- \*\*モバイル\*\*: `Sheet` コンポーネント等を使用したドロワーメニュー。ヘッダーのメニューボタンからトリガーされる。



\## 参考資料



\- `/docs/03\_SCREEN\_DESIGN.md` （サイドバーのデザインとメニュー項目）

\- `/docs/05\_UI\_UX\_GUIDELINES.md` （アクティブ状態の配色ルール、アイコンの使用規定）



\## チェックリスト



実装完了時に、以下をすべて確認：



\- \[ ] `MainSidebar.tsx` がデスクトップ画面の左側に固定表示されること

\- \[ ] 各メニュー項目をクリックすると適切なページへ遷移すること

\- \[ ] 現在表示しているページのメニュー項目が Teal 色でハイライトされること

\- \[ ] 管理者ユーザーでログインした場合のみ「管理画面」リンクが表示されること

\- \[ ] モバイル画面ではサイドバーが格納され、ハンバーガーメニューから展開できること

\- \[ ] ドロワー展開時に背景が暗くなり、背景クリックで閉じることができること

\- \[ ] アイコンとラベルの配置バランス（余白）が適切であること



\## 補足・注意事項



\- サイドバーは常に画面に表示されるため、スクロール追従（`sticky` または `fixed`）の設定と、メインコンテンツエリアの `margin-left` またはグリッドレイアウトの調整を適切に行ってください。

\- 将来的に「お気に入りナレッジ」や「最近見たページ」などの動的リストが追加される可能性があるため、コンポーネント分割を意識してください。

