name: "activity-log-ui-feed"

description: "活動ログをInstagram風のカード形式でタイムライン表示し、無限スクロールまたは「もっと見る」ボタンで過去ログを読み込むUIコンポーネントを実装する。"

version: "1.0.0"

author: "OWLight Development Team"

tags: \["feature", "activity-log", "ui-component"]

triggers:

&nbsp; - "タイムライン表示"

&nbsp; - "活動フィード"

&nbsp; - "画像付き投稿リスト"

---



\## 概要



庁内掲示板のメインコンテンツとなるフィード画面を実装します。

`activity-log-api-feed` から取得したデータを元に、投稿者のアバター、活動内容、添付画像をカード形式で表示します。視覚的な楽しさを重視し、画像が映える「Instagram風」のデザインを採用します。



\## このスキルが前提とするもの



\- `activity-log-api-feed` スキルにより、データ取得API (`GET /api/v1/activity-logs`) が実装済みであること

\- UI ガイドライン（Teal #218F8D）および共通コンポーネント（Avatar, Card, Button）が利用可能であること

\- `SWR` または `TanStack Query` 等のデータフェッチライブラリが導入されていること



\## 実装内容



\### UI 実装



\*\*コンポーネント：ActivityFeed.tsx\*\*



\- 機能：活動ログのリスト表示コンテナ

\- 動作：

&nbsp; - `useSWRInfinite` 等を使用してページネーション（または無限スクロール）を管理

&nbsp; - データ取得中はスケルトンローディングを表示

&nbsp; - データが空の場合は「まだ投稿がありません。一番乗りで投稿しましょう！」等のエンプティステートを表示



\*\*コンポーネント：ActivityCard.tsx\*\*



\- 機能：個々の活動ログを表示するカード

\- 構成要素：

&nbsp; - \*\*ヘッダー\*\*: 投稿者のアバター、表示名、投稿日時（相対表記：例「2時間前」）

&nbsp; - \*\*メディア\*\*: 画像がある場合はアスペクト比を維持して大きく表示（クリックで拡大プレビュー推奨）

&nbsp; - \*\*本文\*\*: テキストコンテンツ（長文の場合は「もっと見る」で省略）

&nbsp; - \*\*フッター\*\*: リアクションボタン配置エリア（別コンポーネント `ReactionButton` 用のプレースホルダー、または実装）



\*\*画面レイアウト\*\*



\- 配置：`ActivityPage` の中央カラム

\- 幅：PCでは `max-w-2xl` (約670px) で中央寄せ、モバイルでは画面幅一杯 (`w-full`)

\- 余白：カード間には十分なマージン (`space-y-6`) を設ける



\## 参考資料



\- `/docs/03\_SCREEN\_DESIGN.md` （掲示板機能のUIモックアップ）

\- `/docs/05\_UI\_UX\_GUIDELINES.md` （カードデザインと画像表示のルール）

\- `/docs/04\_API\_SPECIFICATION.md` （APIレスポンスの型定義）



\## チェックリスト



実装完了時に、以下をすべて確認：



\- \[ ] `ActivityFeed.tsx` で API からデータを取得し、リストが表示されること

\- \[ ] `ActivityCard.tsx` で画像、テキスト、投稿者情報が正しくレイアウトされていること

\- \[ ] 画像がない投稿（テキストのみ）の場合でもレイアウトが崩れないこと

\- \[ ] ページネーション（「もっと見る」ボタン等）が機能し、追加データが読み込まれること

\- \[ ] ローディング中にスケルトンが表示されること

\- \[ ] エラー発生時にリトライボタン等のフォールバックが表示されること

\- \[ ] モバイル（375px）で画像の幅が画面にフィットすること



\## 補足・注意事項



\- 画像の表示には `next/image` を使用し、適切な `width/height` または `fill` プロパティを設定してLayout Shiftを防いでください。

\- リアクションボタンの具体的なトグル処理（APIコール）は、`activity-log-ui-post` や独立したリアクションコンポーネントスキルで実装するため、ここでは表示と配置のみに注力しても構いません。

